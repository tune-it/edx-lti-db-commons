<?xml version="1.0" encoding="UTF-8"?>

<schema name="Airbookings">
    <connection>
        <uri>jdbc:postgresql://localhost:5432/demo</uri>
        <username>airdemo</username>
        <password>demo</password>
    </connection>
    <tables>
        <table sql-name="aircrafts" name="воздушные судна" name-rpl="воздушных судов">
            <column sql-name="aircraft_code" name="код" name-pl="коды"/>
            <column sql-name="model" name="модель" name-pl="модели"/>
            <column sql-name="range" name="максимально возможная дистанция" name-pl="максимально возможные дистанции"/>
        </table>
        <table sql-name="airports" name="аэропорты" name-rpl="аэропортов">
            <column sql-name="airport_code" name="код" name-pl="коды">
                <value start="true" end="true">Y</value>
            </column>
            <column sql-name="airport_name" name="имя" name-pl="имена">
                <value start="true" end="false">О</value>
                <value start="false" end="true">о</value>
            </column>
            <column sql-name="city" name="город" name-pl="города">
                <value start="true" end="false">О</value>
                <value start="false" end="true">о</value>
            </column>
            <column sql-name="coordinates" name="координаты" name-pl="координаты"/>
            <column sql-name="timezone" name="временная зона" name-pl="временные зоны">
                <value start="true" end="false">As</value>
                <value start="false" end="true">sk</value>
            </column>
        </table>
        <table sql-name="boarding_passes" name="посадочный талон" name-rpl="посадочных талонов">
            <column sql-name="ticket_no" name="номер билета" name-pl="номера билетов"/>
            <column sql-name="flight_id" name="идентификатор рейса" name-pl="идентификаторы рейсов"/>
            <column sql-name="boarding_no" name="номер" name-pl="номера"/>
            <column sql-name="seat_no" name="номер места" name-pl="номера мест"/>
        </table>
        <table sql-name="bookings" name="бронирование" name-rpl="бронирования">
            <column sql-name="book_ref" name="код" name-pl="коды"/>
            <column sql-name="book_date" name="дата"  name-pl="даты"/>
            <column sql-name="total_amount" name="сумма"  name-pl="суммы"/>
        </table>    
        <table sql-name="flights" name="рейс воздушного судна" name-rpl="рейсов воздушного судна">
            <column sql-name="flight_id" name="идентификатор рейса" name-pl="идентификаторы рейсов"/>
            <column sql-name="flight_no" name="номер рейса" name-pl="номера рейсов"/>
            <column sql-name="scheduled_departure" name="время планируемого отправления" name-pl="времена планируемых отправлений"/>
            <column sql-name="scheduled_arrival" name="время планируемого прибытия" name-pl="времена планируемых прибытий"/>
            <column sql-name="departure_airport" name="аэропорт отправления" name-pl="аэропорты отправления"/>
            <column sql-name="arrival_airport" name="аэропорт прибытия" name-pl="аэропорты прибытия"/>
            <column sql-name="status" name="статус" name-pl="статусы"/>
            <column sql-name="aircraft_code" name="код воздушного судна" name-pl="коды воздушных судов"/>
            <column sql-name="actual_departure" name="время отправления" name-pl="времена отправлений"/>
            <column sql-name="actual_arrival" name="время прибытия" name-pl="времена прибытий"/>
        </table> 
        <table sql-name="seats" name="посадочное место" name-rpl="посадочных мест">
            <column sql-name="aircraft_code" name="код воздушного судна" name-pl="коды воздушных судов"/>
            <column sql-name="seat_no" name="номер места" name-pl="номера мест"/>
            <column sql-name="fare_conditions" name="тариф" name-pl="тарифы"/>
        </table>
        <table sql-name="ticket_flights" name="состоявшийся полет" name-rpl="состоявшихся полетов">
            <column sql-name="ticket_no" name="номер билета" name-pl="номера билетов"/>
            <column sql-name="flight_id" name="идентификатор рейса" name-pl="идентификаторы рейсов"/>
            <column sql-name="fare_conditions" name="тариф" name-pl="тарифы"/>
            <column sql-name="amount" name="сумма" name-pl="сумму"/>
        </table> 
        <table sql-name="tickets" name="проданный билет" name-rpl="проданных билетов">
            <column sql-name="ticket_no" name="номер" name-pl="номера"/>
            <column sql-name="book_ref" name="код бронирования" name-pl="коды бронирования"/>
            <column sql-name="passenger_id" name="идентификатор пассажира" name-pl="идентификаторы пассажиров"/>
            <column sql-name="passenger_name" name="имя пассажира" name-pl="имена пассажиров"/>
            <column sql-name="contact_data" name="контактная информация" name-pl="контактную информацию"/>
        </table>       
    </tables>
    <labs-config>
        <lab02 id="lab02" description="Простая выборка из таблицы">
            <task01 id="task01" description="Выборка всех столбцов таблицы">
                <prolog>Выведите содержимое всех столбцов таблицы </prolog>
                <epilog>.</epilog>
                <!--<forbidden-list>ticket_flights</forbidden-list>-->
            </task01>
            <task02 id="task02" description="Выборка заданных столбцов таблицы">
                <prolog>Выведите содержимое столбца(столбцов) </prolog>
                <epilog> для таблицы </epilog>
            </task02>
            <task03 id="task03" description="Выборка значений столбцов по имени">
                <prolog>Выведите все </prolog>
                <epilog> для </epilog>
                <!--<forbidden-list>ticket_flights:ticket_no</forbidden-list>-->
            </task03>
            <task04 id="task04" description="Выборка уникальных значений столбцов по имени">
                <prolog>Выведите все уникальные </prolog>
                <epilog> для </epilog>
                <!--<forbidden-list>ticket_flights</forbidden-list>-->
            </task04>
            <task05 id="task05" description="Выборка вычисляемых значений">
                <prolog>Вычислить</prolog>
                <subtask05 table="bookings" column1="NOW" column2="DATE"
                         description="количество времени прошедшее с брони билета">
                    <option05>
                        <time>DAY</time>
                        <value>в днях</value>
                    </option05>
                    <option05>
                        <time>HOUR</time>
                        <value>в часах</value>
                    </option05>
                    <option05>
                        <time>MINUTE</time>
                        <value>в минутах</value>
                    </option05>
                    <option05>
                        <time>SECOND</time>
                        <value>в секундах</value>
                    </option05>
                    <option05>
                        <time>MILLISECONDS</time>
                        <value>в милисекундах</value>
                    </option05>
                </subtask05>
                <subtask05 table="flights" column1="scheduled_departure" column2="scheduled_arrival"
                         description="время планируемого полёта воздушного судна">
                    <option05>
                        <time>DAY</time>
                        <value>в днях</value>
                    </option05>
                    <option05>
                        <time>HOUR</time>
                        <value>в часах</value>
                    </option05>
                    <option05>
                        <time>MINUTE</time>
                        <value>в минутах</value>
                    </option05>
                    <option05>
                        <time>SECOND</time>
                        <value>в секундах</value>
                    </option05>
                    <option05>
                        <time>MILLISECONDS</time>
                        <value>в милисекундах</value>
                    </option05>
                </subtask05>
                <subtask05 table="flights" column1="actual_departure" column2="actual_arrival"
                         description="реальное время полёта воздушного судна">
                    <option05>
                        <time>DAY</time>
                        <value>в днях</value>
                    </option05>
                    <option05>
                        <time>HOUR</time>
                        <value>в часах</value>
                    </option05>
                    <option05>
                        <time>MINUTE</time>
                        <value>в минутах</value>
                    </option05>
                    <option05>
                        <time>SECOND</time>
                        <value>в секундах</value>
                    </option05>
                    <option05>
                        <time>MILLISECONDS</time>
                        <value>в милисекундах</value>
                    </option05>
                </subtask05>
                <epilog/>
                <!--<forbidden-list>ticket_flights</forbidden-list>-->
            </task05>
            <task06 id="task06" description="Преобразование полученных значений">
                <prolog>Вывести в один столбец текст, содержащий такие параметры как:</prolog>
                <epilog>'.</epilog>
                <subtask06 table="aircrafts" description="Я самолётик">
                    <column06 name="модель">
                        <option06>
                            <query>Боинг</query>
                            <answer>split_part(model, ' ', 0)</answer>
                        </option06>
                        <option06>
                            <query>БОИНГ</query>
                            <answer>upper(split_part(model, ' ', 0))</answer>
                        </option06>
                        <option06>
                            <query>боинг</query>
                            <answer>lower(split_part(model, ' ', 0))</answer>
                        </option06>
                        <option06>
                            <query>Боинг 777-300</query>
                            <answer>model</answer>
                        </option06>
                        <option06>
                            <query>боинг 777-300</query>
                            <answer>lower(model)</answer>
                        </option06>
                        <option06>
                            <query>БОИНГ 777-300</query>
                            <answer>upper(model)</answer>
                        </option06>
                    </column06>
                    <column06 name="максимально возможная дистанция">
                        <option06>
                            <query>11100</query>
                            <answer>range</answer>
                        </option06>
                        <option06>
                            <query>11100км</query>
                            <answer>range || 'км'</answer>
                        </option06>
                        <option06>
                            <query>11100 км</query>
                            <answer>range || ' км'</answer>
                        </option06>
                    </column06>
                    <column06 name="код">
                        <option06>
                            <query>773</query>
                            <answer>aircraft_code</answer>
                        </option06>
                        <option06>
                            <query>№773</query>
                            <answer>" №" || aircraft_code</answer>
                        </option06>
                        <option06>
                            <query>№ 773</query>
                            <answer>" № " || aircraft_code</answer>
                        </option06>
                    </column06>
                </subtask06>
                <subtask06 table="airports" description="Я портик">
                    <column06 name="код">
                        <option06>
                            <query>YKS</query>
                            <answer>airport_code</answer>
                        </option06>
                        <option06>
                            <query>yks</query>
                            <answer>lower(airport_code)</answer>
                        </option06>
                    </column06>
                    <column06 name="имя">
                        <option06>
                            <query>Якутск</query>
                            <answer>airport_name</answer>
                        </option06>
                        <option06>
                            <query>аэропорт Якутск</query>
                            <answer>' аэропорт ' || airport_name</answer>
                        </option06>
                        <option06>
                            <query>ЯКУТСК</query>
                            <answer>upper(airport_name)</answer>
                        </option06>
                    </column06>
                    <column06 name="город">
                        <option06>
                            <query>г.Якутск</query>
                            <answer>' г.' || city</answer>
                        </option06>
                        <option06>
                            <query>г. Якутск</query>
                            <answer>' г. ' || city</answer>
                        </option06>
                        <option06>
                            <query>город Якутск</query>
                            <answer>' город' || city</answer>
                        </option06>
                    </column06>
                    <column06 name="временная зона">
                        <option06>
                            <query>Asia/Yakutsk</query>
                            <answer>timezone</answer>
                        </option06>
                        <option06>
                            <query>ASIA/YAKUTSK</query>
                            <answer>upper(timezone)</answer>
                        </option06>
                        <option06>
                            <query>временная зона - Asia/Yakutsk</query>
                            <answer>' временная зона - ' || timezone</answer>
                        </option06>
                        <option06>
                            <query>Asia</query>
                            <answer>split_part(timezone, '/', 0)</answer>
                        </option06>
                        split_part(
                        <option06>
                            <query>временная зона - Asia</query>
                            <answer>' временная зона - ' || split_part(timezone, '/', 0)</answer>
                        </option06>
                    </column06>
                </subtask06>
                <subtask06 table="tickets" description="Я билетик">
                    <column06 name="номер">
                        <option06>
                            <query>0005432000987</query>
                            <answer>ticket_no</answer>
                        </option06>
                        <option06>
                            <query>№0005432000987</query>
                            <answer>' №' || ticket_no</answer>
                        </option06>
                    </column06>
                    <column06 name="код бронирования">
                        <option06>
                            <query>06B046</query>
                            <answer>book_ref</answer>
                        </option06>
                        <option06>
                            <query>код брони - 06B046</query>
                            <answer>' код брони - ' || book_ref</answer>
                        </option06>
                    </column06>
                    <column06 name="идентификатор пассажира">
                        <option06>
                            <query>8149 604011</query>
                            <answer>passenger_id</answer>
                        </option06>
                        <option06>
                            <query>id - 8149 604011</query>
                            <answer>' id - ' || passenger_id</answer>
                        </option06>
                        <option06>
                            <query>8149</query>
                            <answer>split_part(passenger_id, ' ', 0)</answer>
                        </option06>
                        <option06>
                            <query>id - 8149</query>
                            <answer>' id - ' || split_part(passenger_id, ' ', 0)</answer>
                        </option06>
                        <option06>
                            <query>ид - 8149</query>
                            <answer>' ид - ' || split_part(passenger_id, ' ', 0)</answer>
                        </option06>
                        <option06>
                            <query>айди - 8149</query>
                            <answer>' айди - ' || split_part(passenger_id, ' ', 0)</answer>
                        </option06>
                    </column06>
                    <column06 name="имя пассажира">
                        <option06>
                            <query>VALERIY TIKHONOV</query>
                            <answer>passenger_name</answer>
                        </option06>
                        <option06>
                            <query>name - VALERIY TIKHONOV</query>
                            <answer>' name - ' || passenger_name</answer>
                        </option06>
                        <option06>
                            <query>имя фамилия - VALERIY TIKHONOV</query>
                            <answer>' имя фамилия - ' || passenger_name</answer>
                        </option06>
                        <option06>
                            <query>V. TIKHONOV</query>
                            <answer>substr(passenger_name, 0, 0) || '. ' || split(passenger_name, ' ', 1)</answer>
                        </option06>
                        <option06>
                            <query>name - V. TIKHONOV</query>
                            <answer>' name - ' || substr(passenger_name, 0, 0) || '. ' || split(passenger_name, ' ', 1)
                            </answer>
                        </option06>
                    </column06>
                </subtask06>
            </task06>
            <task07 id="task07" description="Выборка значений с условием">
                <prolog>Выдать</prolog>
                <epilog/>
                <subtask07 for="aircrafts:aircraft_code">
                    <left-position>3</left-position>
                    <right-position>3</right-position>
                </subtask07>
                <subtask07 for="aircrafts:model">
                    <left-position>Бо</left-position>
                </subtask07>
                <subtask07 for="aircrafts:range">
                    <left-position>2</left-position>
                </subtask07>
                <subtask07 for="airports:airport_code">
                    <left-position>3</left-position>
                    <right-position>3</right-position>
                </subtask07>
                <subtask07 for="airports:airport_name">
                    <left-position>Бо</left-position>
                </subtask07>
                <subtask07 for="airports:city">
                    <left-position>2</left-position>
                </subtask07>
            </task07>
            <task08 id="task08" description="Выборка значений с сортировкой">
                <prolog>Выдать</prolog>
                <epilog/>
                <subtask08 for="aircrafts:aircraft_code">
                    <left-position>3</left-position>
                    <right-position>4</right-position>
                </subtask08>
                <subtask08 for="aircrafts:model">
                    <left-position>Бо</left-position>
                </subtask08>
                <subtask08 for="aircrafts:range">
                    <left-position>2</left-position>
                </subtask08>
                <subtask08 for="airports:airport_code">
                    <left-position>3</left-position>
                    <right-position>3</right-position>
                </subtask08>
                <subtask08 for="airports:airport_name">
                    <left-position>Бо</left-position>
                </subtask08>
                <subtask08 for="airports:city">
                    <left-position>2</left-position>
                </subtask08>
            </task08>
            <task09 id="task09" description="Выборка значений с сортировкой">
                <prolog>Выдать</prolog>
                <epilog/>
                <subtask09 for="aircrafts:aircraft_code">
                    <left-position>3</left-position>
                    <right-position>4</right-position>
                </subtask09>
                <subtask09 for="aircrafts:model">
                    <left-position>Бо</left-position>
                </subtask09>
                <subtask09 for="aircrafts:range">
                    <left-position>2</left-position>
                </subtask09>
                <subtask09 for="airports:airport_code">
                    <left-position>3</left-position>
                    <right-position>6</right-position>
                </subtask09>
                <subtask09 for="airports:airport_name">
                    <left-position>Бо</left-position>
                </subtask09>
                <subtask09 for="airports:city">
                    <left-position>2</left-position>
                </subtask09>
            </task09>
            <task10 id="task10" description="Выборка с использованием фразы WHERE">
                <prolog>Вывести</prolog>
                <epilog/>
                <subtask10 for="aircrafts:aircraft_code">
                    <option>3</option>
                </subtask10>
                <subtask10 for="aircrafts:model">
                    <option>3 6</option>
                </subtask10>
                <subtask10 for="aircrafts:range">
                    <option>3 4 5</option>
                </subtask10>
                <subtask10 for="airports:airport_code">
                    <option>5</option>
                </subtask10>
                <subtask10 for="airports:airport_name">
                    <option>5d</option>
                </subtask10>
                <subtask10 for="airports:city">
                    <option>5d</option>
                </subtask10>
            </task10>
            <task11 id="task11" description="Агрегирование данных">
                <prolog>Вывести количество</prolog>
                <epilog/>
                <subtask11 for="aircrafts:aircraft_code">
                    <option>3</option>
                </subtask11>
                <subtask11 for="aircrafts:model">
                    <option>3 6</option>
                </subtask11>
                <subtask11 for="aircrafts:range">
                    <option>3 4 5</option>
                </subtask11>
                <subtask11 for="airports:airport_code">
                    <option>5</option>
                </subtask11>
                <subtask11 for="airports:airport_name">
                    <option>5d</option>
                </subtask11>
                <subtask11 for="airports:city">
                    <option>5d</option>
                </subtask11>
            </task11>
            <task12 id="task12" description="Агрегирование данных">
                <prolog>Вывести количество различных</prolog>
                <epilog/>
                <subtask12 for="aircrafts:aircraft_code"/>
                <subtask12 for="aircrafts:model"/>
                <subtask12 for="aircrafts:range"/>
                <subtask12 for="airports:airport_code"/>
                <subtask12 for="airports:airport_name"/>
                <subtask12 for="airports:city"/>
            </task12>
        </lab02>
    </labs-config>
</schema>
