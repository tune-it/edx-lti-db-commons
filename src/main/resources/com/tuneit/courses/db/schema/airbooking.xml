<?xml version="1.0" encoding="UTF-8"?>

<schema name="Airbookings">
    <connection>
        <uri>jdbc:postgresql://localhost/demo</uri>
        <username>airdemo</username>
        <password>demo</password>
    </connection>
    <tables>
        <table sql-name="aircrafts" name="воздушные судна" name-rpl="воздушных судов">
            <column sql-name="aircraft_code" name="код" name-pl="коды"/>
            <column sql-name="model" name="модель" name-pl="модели"/>
            <column sql-name="range" name="максимально возможная дистанция" name-pl="максимально возможные дистанции"/>
        </table>
        <table sql-name="airports" name="аэропорты" name-rpl="аэропортов">
            <column sql-name="airport_code" name="код" name-pl="коды"/>
            <column sql-name="airport_name" name="имя" name-pl="имена"/>
            <column sql-name="city" name="город" name-pl="города"/>
            <column sql-name="coordinates" name="координаты" name-pl="координаты"/>
            <column sql-name="timezone" name="временная зона" name-pl="временные зоны"/>
        </table>
        <table sql-name="boarding_passes" name="посадочный талон" name-rpl="посадочных талонов">
            <column sql-name="ticket_no" name="номер билета" name-pl="номера билетов"/>
            <column sql-name="flight_id" name="идентификатор рейса" name-pl="идентификаторы рейсов"/>
            <column sql-name="boarding_no" name="номер" name-pl="номера"/>
            <column sql-name="seat_no" name="номер места" name-pl="номера мест"/>
        </table>
        <table sql-name="bookings" name="бронирование" name-rpl="бронирования">
            <column sql-name="book_ref" name="код" name-pl="коды"/>
            <column sql-name="book_date" name="дата"  name-pl="даты"/>
            <column sql-name="total_amount" name="сумма"  name-pl="сумму"/>
        </table>    
        <table sql-name="flights" name="рейс воздушного судна" name-rpl="рейсов воздушного судна">
            <column sql-name="flight_id" name="идентификатор рейса" name-pl="идентификаторы рейсов"/>
            <column sql-name="flight_no" name="номер рейса" name-pl="номера рейсов"/>
            <column sql-name="scheduled_departure" name="время планируемого отправления" name-pl="времена планируемых отправлений"/>
            <column sql-name="scheduled_arrival" name="время планируемого прибытия" name-pl="времена планируемых прибытий"/>
            <column sql-name="departure_airport" name="аэропорт отправления" name-pl="аэропорты отправления"/>
            <column sql-name="arrival_airport" name="аэропорт прибытия" name-pl="аэропорты прибытия"/>
            <column sql-name="status" name="статус" name-pl="статусы"/>
            <column sql-name="aircraft_code" name="код воздушного судна" name-pl="коды воздушных судов"/>
            <column sql-name="actual_departure" name="время отправления" name-pl="времена отправлений"/>
            <column sql-name="actual_arrival" name="время прибытия" name-pl="времена прибытий"/>
        </table> 
        <table sql-name="seats" name="посадочное место" name-rpl="посадочных мест">
            <column sql-name="aircraft_code" name="код воздушного судна" name-pl="коды воздушных судов"/>
            <column sql-name="seat_no" name="номер места" name-pl="номера мест"/>
            <column sql-name="fare_conditions" name="тариф" name-pl="тарифы"/>
        </table>
        <table sql-name="ticket_flights" name="состоявшийся полет" name-rpl="состоявшихся полетов">
            <column sql-name="ticket_no" name="номер билета" name-pl="номера билетов"/>
            <column sql-name="flight_id" name="идентификатор рейса" name-pl="идентификаторы рейсов"/>
            <column sql-name="fare_conditions" name="тариф" name-pl="тарифы"/>
            <column sql-name="amount" name="сумма" name-pl="сумму"/>
        </table> 
        <table sql-name="tickets" name="проданный билет" name-rpl="проданных билетов">
            <column sql-name="ticket_no" name="номер" name-pl="номера"/>
            <column sql-name="book_ref" name="код бронирования" name-pl="коды бронирования"/>
            <column sql-name="passenger_id" name="идентификатор пассажира" name-pl="идентификаторы пассажиров"/>
            <column sql-name="passenger_name" name="имя пассажира" name-pl="имена пассажиров"/>
            <column sql-name="contact_data" name="контактная информация" name-pl="контактную информацию"/>
        </table>       
    </tables>
    <labs-config>
        <lab02 id="lab02" description="Простая выборка из таблицы">
            <task01 id="task01" description="Выборка всех столбцов таблицы">
                <prolog>Выведите содержимое всех столбцов таблицы </prolog>
                <epilog>.</epilog>
                <!--<forbidden-list>ticket_flights</forbidden-list>-->
            </task01>
            <task02 id="task02" description="Выборка заданных столбцов таблицы">
                <prolog>Выведите содержимое столбца(столбцов) </prolog>
                <epilog> для таблицы </epilog>
            </task02>
            <task03 id="task03" description="Выборка значений столбцов по имени">
                <prolog>Выведите все </prolog>
                <epilog> для </epilog>
                <!--<forbidden-list>ticket_flights</forbidden-list>-->
            </task03>
            <task04 id="task04" description="Выборка уникальных значений столбцов по имени">
                <prolog>Выведите все уникальные </prolog>
                <epilog> для </epilog>
                <!--<forbidden-list>ticket_flights</forbidden-list>-->
            </task04>
            <task05 id="task05" description="Выборка вычисляемых значений">
                <prolog>Вычислить</prolog>
                <type>
                    <table>bookings</table>
                    <column1>NOW</column1>
                    <column2>DATE</column2>
                    <description>
                        количество времени прошедшее с брони билета
                    </description>
                    <subtype>
                        <time>DAY</time>
                        <value>в днях</value>
                    </subtype>
                    <subtype>
                        <time>HOUR</time>
                        <value>в часах</value>
                    </subtype>
                    <subtype>
                        <time>MINUTE</time>
                        <value>в минутах</value>
                    </subtype>
                    <subtype>
                        <time>SECOND</time>
                        <value>в секундах</value>
                    </subtype>
                    <subtype>
                        <time>MILLISECONDS</time>
                        <value>в милисекундах</value>
                    </subtype>
                </type>
                <type>
                    <table>flights</table>
                    <column1>scheduled_departure</column1>
                    <column2>scheduled_arrival</column2>
                    <description>
                        время планируемого полёта воздушного судна
                    </description>
                    <subtype>
                        <time>DAY</time>
                        <value>в днях</value>
                    </subtype>
                    <subtype>
                        <time>HOUR</time>
                        <value>в часах</value>
                    </subtype>
                    <subtype>
                        <time>MINUTE</time>
                        <value>в минутах</value>
                    </subtype>
                    <subtype>
                        <time>SECOND</time>
                        <value>в секундах</value>
                    </subtype>
                    <subtype>
                        <time>MILLISECONDS</time>
                        <value>в милисекундах</value>
                    </subtype>
                </type>
                <type>
                    <description>
                        реальное время полёта воздушного судна
                    </description>
                    <table>flights</table>
                    <column1>actual_departure</column1>
                    <column2>actual_arrival</column2>
                    <subtype>
                        <time>DAY</time>
                        <value>в днях</value>
                    </subtype>
                    <subtype>
                        <time>HOUR</time>
                        <value>в часах</value>
                    </subtype>
                    <subtype>
                        <time>MINUTE</time>
                        <value>в минутах</value>
                    </subtype>
                    <subtype>
                        <time>SECOND</time>
                        <value>в секундах</value>
                    </subtype>
                    <subtype>
                        <time>MILLISECONDS</time>
                        <value>в милисекундах</value>
                    </subtype>
                </type>
                <epilog/>
                <!--<forbidden-list>ticket_flights</forbidden-list>-->
            </task05>
            <task06 id="task06" description="Преобразование полученных значений">
                <prolog>Вывести в один столбец текст, содержащий такие параметры как:</prolog>
                <epilog>'</epilog>
                <query>
                    <table>aircrafts</table>
                    <description>самолётов в формате 'Я самолётик</description>
                    <query-column>
                        <name>модель</name>
                        <kind>
                            <query-kind>Боинг</query-kind>
                            <answer-kind>split_part(model, ' ', 0)</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>БОИНГ</query-kind>
                            <answer-kind>upper(split_part(model, ' ', 0))</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>боинг</query-kind>
                            <answer-kind>lower(split_part(model, ' ', 0))</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>Боинг 777-300</query-kind>
                            <answer-kind>model</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>боинг 777-300</query-kind>
                            <answer-kind>lower(model)</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>БОИНГ 777-300</query-kind>
                            <answer-kind>upper(model)</answer-kind>
                        </kind>
                    </query-column>
                    <query-column>
                        <name>максимально возможная дистанция</name>
                        <kind>
                            <query-kind>11100</query-kind>
                            <answer-kind>range</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>11100км</query-kind>
                            <answer-kind>range || "км"</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>11100 км</query-kind>
                            <answer-kind>range || " км"</answer-kind>
                        </kind>
                    </query-column>
                    <query-column>
                        <name>код</name>
                        <kind>
                            <query-kind>773</query-kind>
                            <answer-kind>aircraft_code</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>№773</query-kind>
                            <answer-kind>"№" || aircraft_code</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>№ 773</query-kind>
                            <answer-kind>"№ " || aircraft_code</answer-kind>
                        </kind>
                    </query-column>
                </query>
                <query>
                    <table>airports</table>
                    <description>аэропортов в формате 'Я портик</description>
                    <query-column>
                        <name>код</name>
                        <kind>
                            <query-kind>YKS</query-kind>
                            <answer-kind>airport_code</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>yks</query-kind>
                            <answer-kind>lower(airport_code)</answer-kind>
                        </kind>
                    </query-column>
                    <query-column>
                        <name>имя</name>
                        <kind>
                            <query-kind>Якутск</query-kind>
                            <answer-kind>airport_name</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>аэропорт Якутск</query-kind>
                            <answer-kind>"аэропорт " || airport_name</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>ЯКУТСК</query-kind>
                            <answer-kind>upper(airport_name)</answer-kind>
                        </kind>
                    </query-column>
                    <query-column>
                        <name>город</name>
                        <kind>
                            <query-kind>г.Якутск</query-kind>
                            <answer-kind>"г." || city</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>г. Якутск</query-kind>
                            <answer-kind>"г. " || city</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>город Якутск</query-kind>
                            <answer-kind>"город" || city</answer-kind>
                        </kind>
                    </query-column>
                    <query-column>
                        <name>временная зона</name>
                        <kind>
                            <query-kind>Asia/Yakutsk</query-kind>
                            <answer-kind>timezone</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>ASIA/YAKUTSK</query-kind>
                            <answer-kind>upper(timezone)</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>временная зона - Asia/Yakutsk</query-kind>
                            <answer-kind>"временная зона - " || timezone</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>Asia</query-kind>
                            <answer-kind>split_part(timezone, '/', 0)</answer-kind>
                        </kind>split_part(
                        <kind>
                            <query-kind>временная зона - Asia</query-kind>
                            <answer-kind>"временная зона - " || split_part(timezone, '/', 0)</answer-kind>
                        </kind>
                    </query-column>
                </query>
                <query>
                    <table>tickets</table>
                    <description>проданных билетов в формате 'Я билетик</description>
                    <query-column>
                        <name>номер</name>
                        <kind>
                            <query-kind>0005432000987</query-kind>
                            <answer-kind>ticket_no</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>№0005432000987</query-kind>
                            <answer-kind>'№' || ticket_no</answer-kind>
                        </kind>
                    </query-column>
                    <query-column>
                        <name>код бронирования</name>
                        <kind>
                            <query-kind>06B046</query-kind>
                            <answer-kind>book_ref</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>ссылка - 06B046</query-kind>
                            <answer-kind>"ссылка " || book_ref</answer-kind>
                        </kind>
                    </query-column>
                    <query-column>
                        <name>идентификатор пассажира</name>
                        <kind>
                            <query-kind>8149 604011</query-kind>
                            <answer-kind>passenger_id</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>id - 8149 604011</query-kind>
                            <answer-kind>'id - ' || passenger_id</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>8149</query-kind>
                            <answer-kind>split_part(passenger_id, ' ', 0)</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>id - 8149</query-kind>
                            <answer-kind>'id - ' || split_part(passenger_id, ' ', 0)</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>ид - 8149</query-kind>
                            <answer-kind>'ид - ' || split_part(passenger_id, ' ', 0)</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>айди - 8149</query-kind>
                            <answer-kind>'айди - ' || split_part(passenger_id, ' ', 0)</answer-kind>
                        </kind>
                    </query-column>
                    <query-column>
                        <name>имя пассажира</name>
                        <kind>
                            <query-kind>VALERIY TIKHONOV</query-kind>
                            <answer-kind>passenger_name</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>name - VALERIY TIKHONOV</query-kind>
                            <answer-kind>'name - ' || passenger_name</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>имя фамилия - VALERIY TIKHONOV</query-kind>
                            <answer-kind>'имя фамилия - ' || passenger_name</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>V. TIKHONOV</query-kind>
                            <answer-kind>substr(passenger_name, 0, 0) || '. ' || split(passenger_name, ' ', 1)</answer-kind>
                        </kind>
                        <kind>
                            <query-kind>name - V. TIKHONOV</query-kind>
                            <answer-kind>'name - ' || substr(passenger_name, 0, 0) || '. ' || split(passenger_name, ' ', 1)</answer-kind>
                        </kind>
                    </query-column>
                </query>
            </task06>
            <task07 id="task07" description="Выборка значений с условием">
                <prolog>Вычислить</prolog>
                <epilog/>
                <!--<forbidden-list>ticket_flights</forbidden-list>-->
            </task07>
            <task08 id="task08" description="Выборка значений с сортировкой">
                <prolog>Вычислить</prolog>
                <epilog/>
                <!--<forbidden-list>ticket_flights</forbidden-list>-->
            </task08>

        </lab02>
    </labs-config>
</schema>
